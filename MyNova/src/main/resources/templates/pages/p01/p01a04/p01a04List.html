<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default_layout}">

<head>
  <meta charset="UTF-8">
  <title>P01A04 ì„œë²„ ë¦¬ìŠ¤íŠ¸</title>
  <style>
    body { font-family: "Segoe UI", Arial, sans-serif; font-size: 0.95rem; }
    h2 { margin-bottom: 1rem; }

    .toolbar {
      display:flex; justify-content:space-between; align-items:center;
      gap:0.5rem; margin-bottom:1rem;
    }
    .toolbar input {
      padding:0.4rem; border:1px solid #ccc; border-radius:4px;
    }
    .btn {
      background:#2563eb; color:white; border:none; border-radius:4px;
      padding:0.45rem 0.9rem; cursor:pointer; font-size:0.9rem;
    }
    .btn:hover { background:#1e40af; }
    .btn.red { background:#dc2626; }
    .btn.gray { background:#6b7280; }

    table { width:100%; border-collapse:collapse; }
    th, td {
      border:1px solid #ddd; padding:8px; text-align:center;
    }
    th { background:#f3f4f6; }
    td a { color:#2563eb; cursor:pointer; text-decoration:underline; }

    .pagination {
      display:flex; justify-content:center; margin-top:1rem; gap:4px;
    }
    .pagination button {
      border: 1px solid #ccc;
      padding: 5px 10px;
      margin: 0 2px;
      cursor: pointer;
      border-radius: 4px;
      background-color: white;
    }
    .pagination button.active {
      background-color: #2563eb;
      color: white;
      border-color: #2563eb;
    }
    .pagination button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* âœ… ëª¨ë‹¬ */
    .modal {
      display:none; position:fixed; z-index:3000; left:0; top:0;
      width:100%; height:100%; background:rgba(0,0,0,0.5);
    }
    .modal-content {
      background:white; width:90%; max-width:450px; padding:1rem;
      border-radius:0.5rem; position:absolute; top:50%; left:50%;
      transform:translate(-50%, -50%);
    }
    .modal-header { display:flex; justify-content:space-between; align-items:center; }
    .modal-header h3 { margin:0; }
    .form-group { margin:0.5rem 0; text-align:left; }
    .form-group label { display:block; font-size:0.85rem; margin-bottom:0.25rem; }
    .form-group input {
      width:100%; padding:0.4rem; border:1px solid #ccc; border-radius:4px;
    }
    .modal-footer { display:flex; justify-content:flex-end; gap:0.5rem; }
  </style>
</head>

<body>
<div layout:fragment="content">
  <h2>P01A04 ì„œë²„ ë¦¬ìŠ¤íŠ¸</h2>

  <!-- ğŸ” ê²€ìƒ‰ / ì•¡ì…˜ -->
  <div class="toolbar">
    <div>
      <input type="text" id="searchInput" placeholder="ê²€ìƒ‰ì–´ ì…ë ¥" />
      <button id="searchBtn" class="btn">ê²€ìƒ‰</button>
      <button id="deleteSelectedBtn" class="btn red">ì‚­ì œ</button>
    </div>
    <div>
      <button id="excelBtn" class="btn">ì—‘ì…€ ë‹¤ìš´ë¡œë“œ</button>
      <button id="addBtn" class="btn">ì¶”ê°€</button>
    </div>
  </div>

  <!-- ğŸ“‹ ë°ì´í„° í…Œì´ë¸” -->
  <table>
    <thead>
      <tr>
        <th><input type="checkbox" id="checkAll" /></th>
        <th>No</th>
        <th>ì œëª©</th>
        <th>ë‹´ë‹¹ì</th>
        <th>ë“±ë¡ì¼</th>
      </tr>
    </thead>
    <tbody id="dataTable"></tbody>
  </table>

  <div id="pagination" class="pagination"></div>

  <!-- â• ë“±ë¡ ëª¨ë‹¬ -->
  <div id="addModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>í•­ëª© ë“±ë¡</h3>
        <span data-close="addModal" style="cursor:pointer;">&times;</span>
      </div>
      <div class="form-group">
        <label>ì œëª©</label>
        <input type="text" id="titleInput" />
      </div>
      <div class="form-group">
        <label>ë‹´ë‹¹ì</label>
        <input type="text" id="ownerInput" />
      </div>
      <div class="modal-footer">
        <button id="saveBtn" class="btn">ì €ì¥</button>
        <button class="btn gray" data-close="addModal">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <!-- ğŸ” ìƒì„¸ / ìˆ˜ì • ëª¨ë‹¬ -->
  <div id="detailModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ìƒì„¸ ì •ë³´</h3>
        <span data-close="detailModal" style="cursor:pointer;">&times;</span>
      </div>
      <div class="form-group">
        <label>No</label>
        <input id="detailId" readonly />
      </div>
      <div class="form-group">
        <label>ì œëª©</label>
        <input id="detailTitle" />
      </div>
      <div class="form-group">
        <label>ë‹´ë‹¹ì</label>
        <input id="detailOwner" />
      </div>
      <div class="form-group">
        <label>ë“±ë¡ì¼</label>
        <input id="detailRegDate" readonly />
      </div>
      <div class="modal-footer">
        <button id="updateBtn" class="btn">ìˆ˜ì •</button>
        <button class="btn gray" data-close="detailModal">ë‹«ê¸°</button>
      </div>
    </div>
  </div>
</div>

<!-- âœ… í˜ì´ì§€ë³„ ìŠ¤í¬ë¦½íŠ¸ -->
<th:block layout:fragment="pageScript">
  <script src="/js/commonUnifiedList.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      initUnifiedList({
        mode: "p01a04",              // ì„œë²„ êµ¬ë¶„
        apiUrl: "/api/p01a04",       // REST ì—”ë“œí¬ì¸íŠ¸
        tableBodySelector: "#dataTable",
        paginationSelector: "#pagination",
        searchInputSelector: "#searchInput",
        searchBtnSelector: "#searchBtn",
        addBtnSelector: "#addBtn",
        modalId: "#addModal",
        saveBtnSelector: "#saveBtn",
        closeBtnSelector: "[data-close]",
        checkAllSelector: "#checkAll",
        deleteSelectedBtnSelector: "#deleteSelectedBtn",
        detailModalId: "#detailModal",
        detailFields: {
          id: "#detailId",
          title: "#detailTitle",
          owner: "#detailOwner",
          regDate: "#detailRegDate"
        },
        updateBtnSelector: "#updateBtn",
        excelBtnSelector: "#excelBtn",
        columns: [
          { key: "id", label: "No" },
          { key: "title", label: "ì œëª©", isDetailLink: true },
          { key: "owner", label: "ë‹´ë‹¹ì" },
          { key: "regDate", label: "ë“±ë¡ì¼" }
        ]
      });
    });
  </script>
</th:block>

</body>
</html>
